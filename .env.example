# ============================================================================
# Flight Claim System - Environment Configuration Example
# ============================================================================
# Copy this file to .env and update the values for your environment.
# IMPORTANT: Never commit the actual .env file to version control!
# ============================================================================

# ============================================================================
# 1. APPLICATION ENVIRONMENT
# ============================================================================
# Set to 'development', 'staging', or 'production'
# - development: Relaxed security, verbose logging, CORS allows multiple origins
# - production: Strict security, minimal logging, CORS restricted to specific domains
ENVIRONMENT=development

# Logging level: DEBUG, INFO, WARNING, ERROR, CRITICAL
# Development: info or DEBUG
# Production: WARNING or ERROR
LOG_LEVEL=info

# Debug mode (development only)
DEBUG=true

# ============================================================================
# 2. DATABASE CONFIGURATION
# ============================================================================
# PostgreSQL connection string for async operations
# Format: postgresql+asyncpg://username:password@host:port/database
# Local development: postgresql+asyncpg://postgres:postgres@localhost:5432/flight_claim
# Docker: postgresql+asyncpg://postgres:postgres@db:5432/flight_claim
DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/flight_claim

# ============================================================================
# 3. SECURITY & ENCRYPTION
# ============================================================================
# JWT secret key for signing access tokens
# CRITICAL: Must be at least 32 characters and unique per environment
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(64))"
# Development: Can use a simple key for testing
# Production: MUST be a strong, randomly generated key
SECRET_KEY=development-secret-key-for-local-testing-only

# File encryption key for encrypting uploaded documents
# CRITICAL: Must be a valid Fernet key. Changing this will make existing encrypted files unreadable!
# Generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
# Development: Can use a test key
# Production: MUST be securely generated and backed up
FILE_ENCRYPTION_KEY=cz4qKNRg3SdNzRLuPRIXpc3muCpbncZQezeVYknj84Q=

# ============================================================================
# 4. JWT CONFIGURATION
# ============================================================================
# JWT token expiration time in minutes (access tokens)
JWT_EXPIRATION_MINUTES=30

# JWT refresh token expiration time in days
JWT_REFRESH_EXPIRATION_DAYS=7

# ============================================================================
# 5. FILE MANAGEMENT
# ============================================================================
# Maximum file size allowed for uploads in bytes (50MB default)
# 52428800 = 50MB
MAX_FILE_SIZE=52428800

# Allowed file types for uploads (comma-separated)
ALLOWED_FILE_TYPES=pdf,jpg,jpeg,png,doc,docx

# File retention period in days (365 days = 1 year)
FILE_RETENTION_DAYS=365

# ============================================================================
# 6. NEXTCLOUD INTEGRATION
# ============================================================================
# Nextcloud server URL
# Local development: http://localhost:8081
# Docker: http://nextcloud:80
NEXTCLOUD_URL=http://localhost:8081

# Nextcloud admin username
NEXTCLOUD_USERNAME=admin

# Nextcloud admin password
# CRITICAL: Change from default in production!
NEXTCLOUD_PASSWORD=admin_secure_password_2024

# Nextcloud connection timeout in seconds
NEXTCLOUD_TIMEOUT=30

# Maximum retries for Nextcloud operations
NEXTCLOUD_MAX_RETRIES=3

# ============================================================================
# 7. REDIS CONFIGURATION
# ============================================================================
# Redis connection URL for Celery broker and result backend
# Format: redis://[password@]host:port[/db]
# Local development: redis://localhost:6379
# Docker: redis://redis:6379
REDIS_URL=redis://localhost:6379

# ============================================================================
# 8. EMAIL/SMTP CONFIGURATION
# ============================================================================
# SMTP server hostname
# Gmail: smtp.gmail.com
# Office365: smtp.office365.com
# Custom: your-mail-server.com
SMTP_HOST=smtp.gmail.com

# SMTP server port
# Gmail/Office365: 587 (TLS)
# Standard: 25 (unencrypted) or 465 (implicit TLS)
SMTP_PORT=587

# SMTP username (usually your email address)
# For Gmail: your-email@gmail.com
SMTP_USERNAME=your-email@gmail.com

# SMTP password
# For Gmail: Use app-specific password (not your account password)
# Generate at: https://myaccount.google.com/apppasswords
SMTP_PASSWORD=your-app-specific-password

# Email address to send from
SMTP_FROM_EMAIL=noreply@easyairclaim.com

# Display name for emails
SMTP_FROM_NAME=EasyAirClaim

# Use TLS for SMTP connection
# true for port 587 (STARTTLS)
# false for port 465 (implicit TLS)
SMTP_USE_TLS=true

# Enable/disable email notifications
NOTIFICATIONS_ENABLED=true

# ============================================================================
# 9. SECURITY & VIRUS SCANNING
# ============================================================================
# Enable ClamAV virus scanning for uploaded files
# Development: false (ClamAV not required)
# Production: true (if ClamAV is available)
VIRUS_SCAN_ENABLED=false

# ClamAV server address (host:port)
# Docker: clamav:3310
# Local: localhost:3310
CLAMAV_URL=clamav:3310

# ============================================================================
# 10. RATE LIMITING
# ============================================================================
# Rate limit for file uploads (requests per time period)
# Format: "number/time_unit" (e.g., "10/minute", "100/hour")
# Development: 100/minute (relaxed for testing)
# Production: 5/minute (strict for security)
RATE_LIMIT_UPLOAD=100/minute

# Rate limit for file downloads
# Development: 1000/minute (relaxed for testing)
# Production: 50/minute (strict for security)
RATE_LIMIT_DOWNLOAD=1000/minute

# ============================================================================
# 11. CORS CONFIGURATION
# ============================================================================
# Allowed origins for CORS (comma-separated)
# Development: http://localhost:3000,http://localhost:8081,http://localhost:3001
# Production: https://yourdomain.com,https://www.yourdomain.com
# NEVER use "*" in production!
CORS_ORIGINS=http://localhost:3000,http://localhost:8081,http://localhost:3001

# ============================================================================
# 12. SERVER CONFIGURATION
# ============================================================================
# Server host to bind to
HOST=0.0.0.0

# Server port
PORT=8000

# ============================================================================
# 13. SECURITY HEADERS
# ============================================================================
# Enable security headers (HSTS, CSP, X-Frame-Options, etc.)
# Development: false
# Production: true
SECURITY_HEADERS_ENABLED=false

# ============================================================================
# PRODUCTION DEPLOYMENT CHECKLIST
# ============================================================================
# When deploying to production, ensure:
#
# 1. ENVIRONMENT=production
#
# 2. SECRET_KEY: Generate a new secure key
#    python -c "import secrets; print(secrets.token_urlsafe(64))"
#
# 3. FILE_ENCRYPTION_KEY: Generate a new Fernet key
#    python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
#    CRITICAL: Back this up securely! Losing it makes encrypted files unreadable.
#
# 4. DATABASE_URL: Use production PostgreSQL instance
#    postgresql+asyncpg://user:password@prod-db.example.com:5432/flight_claim
#
# 5. NEXTCLOUD_PASSWORD: Change from default
#
# 6. SMTP credentials: Configure with production email service
#    - Gmail: Use app-specific password (https://myaccount.google.com/apppasswords)
#    - Office365: Use service account
#    - Custom: Use production mail server
#
# 7. CORS_ORIGINS: Set to your production domain(s)
#    https://yourdomain.com,https://www.yourdomain.com
#
# 8. SECURITY_HEADERS_ENABLED=true
#
# 9. RATE_LIMIT_UPLOAD=5/minute
#    RATE_LIMIT_DOWNLOAD=50/minute
#
# 10. LOG_LEVEL=WARNING or ERROR
#
# 11. DEBUG=false
#
# 12. VIRUS_SCAN_ENABLED=true (if ClamAV is available)
#
# 13. Use environment-specific secrets management:
#     - AWS Secrets Manager
#     - HashiCorp Vault
#     - Kubernetes Secrets
#     - Docker Secrets
#
# ============================================================================
# DEVELOPMENT SETUP NOTES
# ============================================================================
# For local development with Docker Compose:
#
# 1. Copy this file to .env
# 2. Run: docker-compose up -d
# 3. The services will use the environment variables from .env
#
# For local development without Docker:
#
# 1. Copy this file to .env
# 2. Ensure PostgreSQL is running on localhost:5432
# 3. Ensure Redis is running on localhost:6379
# 4. Run: uvicorn app.main:app --reload
#
# To generate secure keys:
#
# JWT Secret:
#   python -c "import secrets; print(secrets.token_urlsafe(64))"
#
# Fernet Encryption Key:
#   python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
#
# ============================================================================
# ENVIRONMENT VARIABLES REFERENCE
# ============================================================================
#
# DATABASE CONFIGURATION:
#   DATABASE_URL - PostgreSQL connection string
#
# APPLICATION SETTINGS:
#   ENVIRONMENT - deployment environment (development/production)
#   LOG_LEVEL - logging verbosity
#   DEBUG - debug mode flag
#
# SECURITY:
#   SECRET_KEY - JWT signing key
#   FILE_ENCRYPTION_KEY - Fernet encryption key for files
#   SECURITY_HEADERS_ENABLED - enable security headers
#
# JWT:
#   JWT_EXPIRATION_MINUTES - access token lifetime
#   JWT_REFRESH_EXPIRATION_DAYS - refresh token lifetime
#
# FILE MANAGEMENT:
#   MAX_FILE_SIZE - maximum upload size in bytes
#   ALLOWED_FILE_TYPES - comma-separated list of allowed extensions
#   FILE_RETENTION_DAYS - how long to keep files
#
# NEXTCLOUD:
#   NEXTCLOUD_URL - Nextcloud server URL
#   NEXTCLOUD_USERNAME - Nextcloud admin username
#   NEXTCLOUD_PASSWORD - Nextcloud admin password
#   NEXTCLOUD_TIMEOUT - connection timeout in seconds
#   NEXTCLOUD_MAX_RETRIES - retry attempts for failed operations
#
# REDIS:
#   REDIS_URL - Redis connection string for Celery
#
# EMAIL:
#   SMTP_HOST - SMTP server hostname
#   SMTP_PORT - SMTP server port
#   SMTP_USERNAME - SMTP authentication username
#   SMTP_PASSWORD - SMTP authentication password
#   SMTP_FROM_EMAIL - sender email address
#   SMTP_FROM_NAME - sender display name
#   SMTP_USE_TLS - use TLS for SMTP
#   NOTIFICATIONS_ENABLED - enable email notifications
#
# SECURITY:
#   VIRUS_SCAN_ENABLED - enable ClamAV scanning
#   CLAMAV_URL - ClamAV server address
#   RATE_LIMIT_UPLOAD - upload rate limit
#   RATE_LIMIT_DOWNLOAD - download rate limit
#
# CORS:
#   CORS_ORIGINS - allowed origins for CORS
#
# SERVER:
#   HOST - server bind address
#   PORT - server port
#
# ============================================================================
# TROUBLESHOOTING
# ============================================================================
#
# Database connection issues:
#   - Verify DATABASE_URL format
#   - Check PostgreSQL is running: psql -U postgres -d flight_claim
#   - Verify credentials
#   - Check firewall/network connectivity
#
# Email not sending:
#   - Check SMTP_HOST and SMTP_PORT
#   - Verify SMTP_USERNAME and SMTP_PASSWORD
#   - For Gmail: Use app-specific password, not account password
#   - Check NOTIFICATIONS_ENABLED=true
#   - Check LOG_LEVEL for error messages
#
# File upload issues:
#   - Verify NEXTCLOUD_URL is accessible
#   - Check NEXTCLOUD_USERNAME and NEXTCLOUD_PASSWORD
#   - Ensure MAX_FILE_SIZE is appropriate
#   - Check disk space on Nextcloud server
#   - Verify file permissions
#
# Celery tasks not running:
#   - Verify REDIS_URL is correct
#   - Check Redis is running: redis-cli ping
#   - Verify celery worker is started
#   - Check LOG_LEVEL for error messages
#   - Check Celery worker logs
#
# Encryption issues:
#   - Verify FILE_ENCRYPTION_KEY is a valid Fernet key
#   - Don't change FILE_ENCRYPTION_KEY after files are encrypted
#   - If key is lost, encrypted files cannot be recovered
#
# ============================================================================
