<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flight Compensation Claims - EU Regulation 261/2004</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header__content">
                <div class="logo">
                    <h1>FlightClaim</h1>
                    <span class="logo__subtitle">EU 261 Compensation</span>
                </div>
                <nav class="nav">
                    <button class="btn btn--secondary" onclick="app.showView('home')">Home</button>
                    <button class="btn btn--secondary" onclick="app.showView('claim-form')">Submit Claim</button>
                    <button class="btn btn--outline" onclick="app.showView('login')">Check Status</button>
                </nav>
                <div class="user-status hidden">
                    <span class="user-email"></span>
                    <button class="btn btn--sm btn--outline" onclick="app.logout()">Logout</button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main">
        <!-- Home/Landing Page -->
        <section id="home-view" class="view view--active">
            <div class="hero">
                <div class="container">
                    <div class="hero__content">
                        <h1>Get Up to â‚¬600 Flight Compensation</h1>
                        <p class="hero__subtitle">Under EU Regulation 261/2004, you may be entitled to compensation for delayed, cancelled, or overbooked flights.</p>
                        <div class="hero__actions">
                            <button class="btn btn--primary btn--lg" onclick="app.showView('claim-form')">Submit New Claim</button>
                            <button class="btn btn--outline btn--lg" onclick="app.showView('login')">Check Claim Status</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="container">
                <section class="compensation-info">
                    <h2>Compensation Amounts</h2>
                    <div class="compensation-grid">
                        <div class="compensation-card">
                            <h3>â‚¬250</h3>
                            <p>Short-haul flights</p>
                            <span>Under 1,500 km</span>
                        </div>
                        <div class="compensation-card">
                            <h3>â‚¬400</h3>
                            <p>Medium-haul flights</p>
                            <span>1,500 - 3,500 km</span>
                        </div>
                        <div class="compensation-card">
                            <h3>â‚¬600</h3>
                            <p>Long-haul flights</p>
                            <span>Over 3,500 km</span>
                        </div>
                    </div>
                </section>

                <section class="rights-info">
                    <h2>Your Passenger Rights</h2>
                    <div class="rights-grid">
                        <div class="rights-card">
                            <h3>Flight Delays</h3>
                            <p>Compensation for delays over 3 hours at your final destination</p>
                        </div>
                        <div class="rights-card">
                            <h3>Cancellations</h3>
                            <p>Right to compensation unless given 14+ days notice</p>
                        </div>
                        <div class="rights-card">
                            <h3>Denied Boarding</h3>
                            <p>Overbooked flights qualify for immediate compensation</p>
                        </div>
                        <div class="rights-card">
                            <h3>Downgrades</h3>
                            <p>Partial refund when moved to lower class of service</p>
                        </div>
                    </div>
                </section>
            </div>
        </section>

        <!-- Claim Form -->
        <section id="claim-form-view" class="view">
            <div class="container">
                <div class="form-container">
                    <div class="form-header">
                        <h2>Submit Flight Compensation Claim</h2>
                        <div class="form-progress">
                            <div class="progress-step progress-step--active" data-step="1">
                                <span>1</span> Personal Info
                            </div>
                            <div class="progress-step" data-step="2">
                                <span>2</span> Flight Details
                            </div>
                            <div class="progress-step" data-step="3">
                                <span>3</span> Disruption
                            </div>
                            <div class="progress-step" data-step="4">
                                <span>4</span> Legal
                            </div>
                        </div>
                    </div>

                    <form id="claim-form" class="claim-form">
                        <!-- Step 1: Personal Information -->
                        <div class="form-step form-step--active" data-step="1">
                            <h3>Personal Information</h3>
                            
                            <div class="form-group">
                                <label for="fullName" class="form-label">Full Legal Name *</label>
                                <input type="text" id="fullName" name="fullName" class="form-control" required 
                                       minlength="2" aria-describedby="fullName-error">
                                <div class="error-message" id="fullName-error"></div>
                            </div>

                            <div class="form-group">
                                <label for="email" class="form-label">Email Address *</label>
                                <input type="email" id="email" name="email" class="form-control" required 
                                       aria-describedby="email-error">
                                <div class="error-message" id="email-error"></div>
                            </div>

                            <div class="form-group">
                                <label for="phone" class="form-label">Phone Number (Optional)</label>
                                <input type="tel" id="phone" name="phone" class="form-control" 
                                       aria-describedby="phone-error">
                                <div class="error-message" id="phone-error"></div>
                            </div>
                        </div>

                        <!-- Step 2: Flight Details -->
                        <div class="form-step" data-step="2">
                            <h3>Flight Details</h3>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="flightNumber" class="form-label">Flight Number *</label>
                                    <input type="text" id="flightNumber" name="flightNumber" class="form-control" 
                                           required maxlength="6" placeholder="e.g., LH1234" aria-describedby="flightNumber-error">
                                    <div class="error-message" id="flightNumber-error"></div>
                                </div>

                                <div class="form-group">
                                    <label for="ticketNumber" class="form-label">Ticket/Booking Reference *</label>
                                    <input type="text" id="ticketNumber" name="ticketNumber" class="form-control" 
                                           required minlength="6" aria-describedby="ticketNumber-error">
                                    <div class="error-message" id="ticketNumber-error"></div>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="departureAirport" class="form-label">Departure Airport (IATA Code) *</label>
                                    <input type="text" id="departureAirport" name="departureAirport" class="form-control" 
                                           required maxlength="3" pattern="[A-Z]{3}" placeholder="e.g., LHR" 
                                           aria-describedby="departureAirport-error">
                                    <div class="error-message" id="departureAirport-error"></div>
                                </div>

                                <div class="form-group">
                                    <label for="arrivalAirport" class="form-label">Arrival Airport (IATA Code) *</label>
                                    <input type="text" id="arrivalAirport" name="arrivalAirport" class="form-control" 
                                           required maxlength="3" pattern="[A-Z]{3}" placeholder="e.g., CDG" 
                                           aria-describedby="arrivalAirport-error">
                                    <div class="error-message" id="arrivalAirport-error"></div>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="scheduledFlightDateTime" class="form-label">Scheduled Departure *</label>
                                    <input type="datetime-local" id="scheduledFlightDateTime" name="scheduledFlightDateTime" 
                                           class="form-control" required aria-describedby="scheduledFlightDateTime-error">
                                    <div class="error-message" id="scheduledFlightDateTime-error"></div>
                                </div>

                                <div class="form-group">
                                    <label for="actualFlightDateTime" class="form-label">Actual Departure (if applicable)</label>
                                    <input type="datetime-local" id="actualFlightDateTime" name="actualFlightDateTime" 
                                           class="form-control" aria-describedby="actualFlightDateTime-error">
                                    <div class="error-message" id="actualFlightDateTime-error"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Step 3: Disruption Details -->
                        <div class="form-step" data-step="3">
                            <h3>Disruption Details</h3>
                            
                            <div class="form-group">
                                <label for="disruptionType" class="form-label">Type of Disruption *</label>
                                <select id="disruptionType" name="disruptionType" class="form-control" required 
                                        aria-describedby="disruptionType-error">
                                    <option value="">Select disruption type</option>
                                    <option value="delay">Flight Delay</option>
                                    <option value="cancellation">Flight Cancellation</option>
                                    <option value="denied boarding">Denied Boarding</option>
                                    <option value="downgrade">Class Downgrade</option>
                                </select>
                                <div class="error-message" id="disruptionType-error"></div>
                            </div>

                            <div class="form-group">
                                <label for="incidentDescription" class="form-label">Describe the Incident</label>
                                <textarea id="incidentDescription" name="incidentDescription" class="form-control" 
                                          rows="4" placeholder="Please provide details about what happened..."></textarea>
                            </div>

                            <div class="form-group">
                                <label for="documents" class="form-label">Supporting Documents (Optional)</label>
                                <div class="file-upload-area">
                                    <input type="file" id="documents" name="documents" multiple 
                                           accept=".pdf,.jpg,.jpeg,.png" aria-describedby="documents-help documents-error">
                                    <div class="file-upload-text">
                                        <strong>Click to upload</strong> or drag and drop files here
                                        <br><small>PDF, JPG, PNG files only. Max 5MB each, 5 files maximum.</small>
                                    </div>
                                    <div id="documents-help" class="form-help">
                                        Helpful documents: boarding pass, booking confirmation, airline communications
                                    </div>
                                    <div class="error-message" id="documents-error"></div>
                                    <div class="uploaded-files"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Step 4: Legal Declarations -->
                        <div class="form-step" data-step="4">
                            <h3>Legal Declarations</h3>
                            
                            <div class="form-group">
                                <div class="checkbox-group">
                                    <input type="checkbox" id="declarationAccepted" name="declarationAccepted" required>
                                    <label for="declarationAccepted">
                                        <strong>Declaration of Truthfulness *</strong>
                                        <br>I declare that all information provided is true and accurate to the best of my knowledge. 
                                        I understand that providing false information may result in legal consequences and claim rejection.
                                    </label>
                                </div>
                                <div class="error-message" id="declarationAccepted-error"></div>
                            </div>

                            <div class="form-group">
                                <div class="checkbox-group">
                                    <input type="checkbox" id="consentAccepted" name="consentAccepted" required>
                                    <label for="consentAccepted">
                                        <strong>Terms and Privacy Consent *</strong>
                                        <br>I agree to the terms of service and privacy policy. I consent to the processing 
                                        of my personal data for the purpose of handling my compensation claim.
                                    </label>
                                </div>
                                <div class="error-message" id="consentAccepted-error"></div>
                            </div>

                            <div class="auto-save-status">
                                <span class="auto-save-indicator">Auto-saving draft...</span>
                            </div>
                        </div>

                        <!-- Form Navigation -->
                        <div class="form-navigation">
                            <button type="button" class="btn btn--outline" id="prevStep">Previous</button>
                            <button type="button" class="btn btn--primary" id="nextStep">Next</button>
                            <button type="submit" class="btn btn--primary hidden" id="submitClaim">
                                <span class="btn-text">Submit Claim</span>
                                <span class="spinner hidden"></span>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </section>

        <!-- Login -->
        <section id="login-view" class="view">
            <div class="container">
                <div class="auth-container">
                    <div class="auth-card">
                        <h2>Check Claim Status</h2>
                        <p>Login with your email and ticket number to view your claims</p>
                        
                        <form id="login-form" class="login-form">
                            <div class="form-group">
                                <label for="loginEmail" class="form-label">Email Address *</label>
                                <input type="email" id="loginEmail" name="email" class="form-control" required 
                                       aria-describedby="loginEmail-error">
                                <div class="error-message" id="loginEmail-error"></div>
                            </div>

                            <div class="form-group">
                                <label for="loginTicketNumber" class="form-label">Ticket/Booking Reference *</label>
                                <input type="text" id="loginTicketNumber" name="ticketNumber" class="form-control" 
                                       required minlength="6" aria-describedby="loginTicketNumber-error">
                                <div class="error-message" id="loginTicketNumber-error"></div>
                            </div>

                            <button type="submit" class="btn btn--primary btn--full-width">
                                <span class="btn-text">Login</span>
                                <span class="spinner hidden"></span>
                            </button>
                            
                            <div class="error-message" id="login-error"></div>
                        </form>
                    </div>
                </div>
            </div>
        </section>

        <!-- Claims Dashboard -->
        <section id="dashboard-view" class="view">
            <div class="container">
                <div class="dashboard-header">
                    <h2>Your Claims</h2>
                    <p class="welcome-message">Welcome back, <span class="user-email-display"></span></p>
                </div>

                <div class="claims-list" id="claims-list">
                    <!-- Claims will be populated by JavaScript -->
                </div>

                <!-- Claim Details Modal -->
                <div class="modal hidden" id="claim-details-modal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3>Claim Details</h3>
                            <button class="modal-close" onclick="app.closeModal()">&times;</button>
                        </div>
                        <div class="modal-body" id="claim-details-content">
                            <!-- Content populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Success Message -->
        <section id="success-view" class="view">
            <div class="container">
                <div class="success-container">
                    <div class="success-icon">âœ“</div>
                    <h2>Claim Submitted Successfully!</h2>
                    <p>Your claim has been submitted and you will receive a confirmation email shortly.</p>
                    <div class="claim-reference">
                        <strong>Claim ID: <span id="claim-id"></span></strong>
                    </div>
                    <div class="success-actions">
                        <button class="btn btn--primary" onclick="app.showView('login')">Check Claim Status</button>
                        <button class="btn btn--outline" onclick="app.showView('home')">Return to Home</button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Floating Chatbot -->
    <div class="chatbot-container">
        <button class="chatbot-toggle" onclick="app.toggleChat()" aria-label="Toggle chat">
            <span class="chat-icon">ðŸ’¬</span>
        </button>
        
        <div class="chatbot-window hidden">
            <div class="chatbot-header">
                <h4>Flight Compensation Assistant</h4>
                <button class="chatbot-minimize" onclick="app.toggleChat()">&minus;</button>
            </div>
            
            <div class="chatbot-messages" id="chatbot-messages">
                <div class="message message--bot">
                    <div class="message-content">
                        Hello! I'm here to help you with your flight compensation claim. How can I assist you today?
                    </div>
                    <div class="message-timestamp"></div>
                </div>
            </div>
            
            <div class="chatbot-input">
                <input type="text" id="chat-input" placeholder="Type your message..." maxlength="1000" 
                       onkeypress="app.handleChatKeyPress(event)">
                <button onclick="app.sendMessage()" class="btn btn--primary btn--sm">Send</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>